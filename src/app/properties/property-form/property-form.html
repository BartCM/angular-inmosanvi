<form #formRef="ngForm"
      (ngSubmit)="onSubmit(formRef)"
      class="bg-white p-8 rounded-lg shadow-md space-y-6">

  <!-- PROVINCE / TOWN -->
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

    <!-- PROVINCE -->
    <div>
      <label class="block text-gray-700 font-bold mb-2">Province</label>
      <select
        name="provinceId"
        required
        [ngModel]="provinceId()"
        (ngModelChange)="provinceId.set($event ? +$event : 0)"
        class="w-full px-3 py-2 border rounded-lg bg-white">
        <option value="">Select a province</option>
        @for (province of provincesResource.value()?.provinces; track province.id) {
          <option [value]="province.id">{{ province.name }}</option>
        }
      </select>
    </div>

    <!-- TOWN -->
    <div>
      <label class="block text-gray-700 font-bold mb-2">Town</label>
      <select
        name="townId"
        required
        [ngModel]="newProperty.townId"
        (ngModelChange)="newProperty.townId = +$event ? +$event : 0"
        class="w-full px-3 py-2 border rounded-lg bg-white">
        <option value="">Select a town</option>
        @for (town of townsResource.value()?.towns; track town.id) {
          <option [value]="town.id">{{ town.name }}</option>
        }
      </select>
    </div>
  </div>

  <!-- ADDRESS -->
  <div>
    <label for="address" class="block text-gray-700 font-bold mb-2">Address</label>
    <input 
        name="address" 
        required
        [(ngModel)]="newProperty.address"
        class="w-full px-3 py-2 border rounded-lg">
  </div>

  <!-- TITLE -->
  <div>
    <label class="block text-gray-700 font-bold mb-2">Listing Title</label>
    <input
      name="title"
      required
      [(ngModel)]="newProperty.title"
      class="w-full px-3 py-2 border rounded-lg">
  </div>

  <!-- DESCRIPTION -->
  <div>
    <label class="block text-gray-700 font-bold mb-2">Description</label>
    <textarea
      name="description"
      required
      [(ngModel)]="newProperty.description"
      class="w-full px-3 py-2 border rounded-lg">
    </textarea>
  </div>

  <!-- NUMBERS -->
  <div class="grid grid-cols-1 md:grid-cols-3 gap-6">

    <input name="sqmeters" type="number" min="1" required
           [(ngModel)]="newProperty.sqmeters"
           placeholder="Sq meters"
           class="border rounded px-3 py-2">

    <input name="numRooms" type="number" min="1" required
           [(ngModel)]="newProperty.numRooms"
           placeholder="Rooms"
           class="border rounded px-3 py-2">

    <input name="numBaths" type="number" min="1" required
           [(ngModel)]="newProperty.numBaths"
           placeholder="Baths"
           class="border rounded px-3 py-2">

    </div>
    
  <div class="grid grid-cols-1 md:grid-cols-2 gap-6 items-end">
        <!-- PRICE -->
        <div class="self-start">
          <label class="block text-gray-700 font-bold mb-2">Price (â‚¬)</label>
          <input
            name="price"
            type="number"
            min="1"
            required
            [(ngModel)]="newProperty.price"
            class="w-full px-3 py-2 border rounded-lg">
        </div>

      <!-- IMAGE -->
      <div>
        <label class="block text-gray-700 font-bold mb-2">Main Photo</label>
        <input
          type="file"
          encodeBase64
          (encoded)="onImageEncoded($event)"
          class="block text-sm text-gray-700
               file:py-2 file:px-4
               file:rounded-lg file:border-0
               file:bg-blue-100 file:text-blue-700
               hover:file:bg-blue-200">
            <div class="mt-4">
              @if (newProperty.mainPhoto) {
                <img
                  [src]="newProperty.mainPhoto"
                  class="w-full h-48 object-cover rounded-lg shadow"
                />
              } 
            </div>
      </div>
  </div>

  <!-- SUBMIT -->
  <button type="submit"
          class="w-full bg-blue-500 text-white font-bold py-3 px-4 rounded-lg hover:bg-blue-600">
    Add Property
  </button>

</form>